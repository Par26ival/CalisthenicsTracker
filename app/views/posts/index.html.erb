<div class="flex gap-4 mb-6">
  <%= link_to "ðŸ  Home",
        root_path,
        class: "px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 font-medium" %>

  <%= link_to "âž• New Post",
        new_post_path,
        class: "px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 font-medium" %>
</div>

<div id="posts">
  <% @posts.each do |post| %>
    <div class="post-card">
      <strong><%= post.user.username %></strong>

      <small class="block text-gray-500">
        <%= time_ago_in_words(post.created_at) %> ago
      </small>

      <p class="mt-2">
        <%= truncate(strip_tags(post.content), length: 200) %>
      </p>

      <% if post.media.attached? %>
        <div class="mt-3 space-y-2">
          <% post.media.each do |file| %>
            <% if file.image? %>
              <%= image_tag file,
                    class: "max-w-full rounded",
                    loading: "lazy" %>
            <% elsif file.video? %>
              <%= video_tag file,
                    controls: true,
                    class: "max-w-full rounded" %>
            <% end %>
          <% end %>
        </div>
      <% end %>
      
      <div class="flex gap-4 mt-2">
        <%= link_to "Browse Post",
              post_path(post),
              class: "inline-block mt-3 px-3 py-1 rounded bg-indigo-100 text-indigo-700 hover:bg-indigo-200 text-sm font-medium" %>

        <% if current_user.admin? || post.user == current_user %>
          <%= button_to "Delete",
                post_path(post),
                method: :delete,
                data: { confirm: "Are you sure?" },
                class: "text-red-600" %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>